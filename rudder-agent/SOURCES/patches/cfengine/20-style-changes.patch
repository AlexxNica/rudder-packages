From b88519e5fa2ce88f4b992a5e9b374aa3316e7dc9 Mon Sep 17 00:00:00 2001
From: Dimitrios Apostolou <dimitrios.apostolou@cfengine.com>
Date: Sat, 6 Feb 2016 01:36:43 +0100
Subject: [PATCH] Simplify code, no change.

(cherry picked from commit 1d8e3f8c36473a2854f9523f23ecd84bac3b3a0a)
---
 libpromises/class.c | 25 ++++++++++---------------
 1 file changed, 10 insertions(+), 15 deletions(-)

diff --git a/libpromises/class.c b/libpromises/class.c
index 0fedfe8..67f2e66 100644
--- a/libpromises/class.c
+++ b/libpromises/class.c
@@ -131,13 +131,16 @@ void ClassTableDestroy(ClassTable *table)
     }
 }
 
-bool ClassTablePut(ClassTable *table, const char *ns, const char *name, bool is_soft, ContextScope scope, const char *tags)
+bool ClassTablePut(ClassTable *table,
+                   const char *ns, const char *name,
+                   bool is_soft, ContextScope scope, const char *tags)
 {
     assert(name);
     assert(is_soft || (!ns || strcmp("default", ns) == 0)); // hard classes should have default namespace
     assert(is_soft || scope == CONTEXT_SCOPE_NAMESPACE); // hard classes cannot be local
 
-    if (ns && strcmp("default", ns) == 0)
+    if (ns != NULL &&
+        strcmp("default", ns) == 0)
     {
         ns = NULL;
     }
@@ -152,19 +155,11 @@ bool ClassTablePut(ClassTable *table, const char *ns, const char *name, bool is_
     }
     else
     {
-        if (ns == NULL ||
-            strcmp("default", ns) == 0)
-        {
-            Log(LOG_LEVEL_DEBUG, "Setting %sclass %s",
-                is_soft ? "" : "hard ",
-                name);
-        }
-        else                                        /* also print namespace */
-        {
-            Log(LOG_LEVEL_DEBUG, "Setting %sclass %s:%s",
-                is_soft ? "" : "hard ",
-                ns, name);
-        }
+        Log(LOG_LEVEL_DEBUG, "Setting %sclass %s%s%s",
+            is_soft ? "" : "hard ",
+            (ns != NULL) ? ns  : "",
+            (ns != NULL) ? ":" : "",
+            name);
 
         cls = xmalloc(sizeof(Class));
         ClassInit(cls, ns, name, is_soft, scope, tags);
